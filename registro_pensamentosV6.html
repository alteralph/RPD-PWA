<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro de Pensamentos Disfuncionais</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            padding: 20px;
            color: #e0e0e0;
            transition: all 0.3s ease;
        }

        body.light-mode {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: #2d3748;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: #0f1419;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
            overflow: hidden;
            border: 1px solid #2d3748;
            transition: all 0.3s ease;
        }

        body.light-mode .container {
            background: #ffffff;
            border: 1px solid #e2e8f0;
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            padding-top: 60px;
            text-align: center;
            position: relative;
        }

        .theme-toggle {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 8px 16px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9em;
            z-index: 10;
        }

        .theme-toggle:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.05);
        }

        @media (max-width: 768px) {
            .header {
                padding-top: 70px;
            }

            .theme-toggle {
                top: 10px;
                right: 10px;
                padding: 6px 12px;
                font-size: 0.85em;
                gap: 5px;
            }

            .header h1 {
                font-size: 1.5em;
            }

            .header p {
                font-size: 0.9em;
            }
        }

        .header h1 {
            font-size: 2em;
            margin-bottom: 10px;
        }

        .instructions {
            background: #1a202c;
            padding: 20px;
            border-left: 5px solid #667eea;
            margin: 20px;
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        body.light-mode .instructions {
            background: #f7fafc;
            border-left: 5px solid #667eea;
        }

        .instructions p {
            line-height: 1.6;
            color: #cbd5e0;
            transition: all 0.3s ease;
        }

        body.light-mode .instructions p {
            color: #4a5568;
        }

        .main-content {
            padding: 20px;
        }

        .form-section {
            background: #1a202c;
            padding: 25px;
            margin-bottom: 20px;
            border-radius: 15px;
            border: 2px solid #2d3748;
            transition: all 0.3s ease;
        }

        body.light-mode .form-section {
            background: #f7fafc;
            border: 2px solid #e2e8f0;
        }

        .form-section:hover {
            border-color: #667eea;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .form-section h3 {
            color: #a78bfa;
            margin-bottom: 15px;
            font-size: 1.3em;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
        }

        body.light-mode .form-section h3 {
            color: #667eea;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #cbd5e0;
            font-weight: 600;
            font-size: 0.95em;
            transition: all 0.3s ease;
        }

        body.light-mode .form-group label {
            color: #4a5568;
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #2d3748;
            border-radius: 8px;
            font-size: 1em;
            font-family: inherit;
            transition: all 0.3s ease;
            background: #0f1419;
            color: #e0e0e0;
        }

        body.light-mode .form-group input,
        body.light-mode .form-group textarea {
            background: #ffffff;
            color: #2d3748;
            border: 2px solid #e2e8f0;
        }

        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.2);
        }

        .form-group textarea {
            min-height: 100px;
            resize: vertical;
        }

        /* Campos din√¢micos */
        .dynamic-field {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
            align-items: flex-start;
            position: relative;
        }

        .dynamic-field::before {
            content: attr(data-number);
            position: absolute;
            left: -30px;
            top: 12px;
            color: #a78bfa;
            font-weight: bold;
            font-size: 1.1em;
            transition: all 0.3s ease;
        }

        body.light-mode .dynamic-field::before {
            color: #667eea;
        }

        .dynamic-field textarea {
            flex: 1;
            min-height: 60px;
        }

        .percentage-wrapper {
            position: relative;
            width: 100px;
            flex-shrink: 0;
        }

        .percentage-wrapper input[type="number"] {
            width: 100%;
            padding-right: 25px;
        }

        /* Remove as setas do input number e permite decimais */
        input[type="number"] {
            -moz-appearance: textfield;
        }

        input[type="number"]::-webkit-inner-spin-button,
        input[type="number"]::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        .percentage-wrapper::after {
            content: '%';
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: #a78bfa;
            font-weight: bold;
            pointer-events: none;
            transition: all 0.3s ease;
        }

        body.light-mode .percentage-wrapper::after {
            color: #667eea;
        }

        .dynamic-field input[type="number"] {
            flex-shrink: 0;
        }

        .thought-reference {
            background: #0f1419;
            border: 2px solid #2d3748;
            border-left: 4px solid #667eea;
            padding: 12px;
            margin-bottom: 12px;
            border-radius: 8px;
            font-size: 0.9em;
            color: #cbd5e0;
            transition: all 0.3s ease;
        }

        body.light-mode .thought-reference {
            background: #edf2f7;
            border: 2px solid #e2e8f0;
            border-left: 4px solid #667eea;
            color: #4a5568;
        }

        .thought-reference strong {
            color: #a78bfa;
            display: block;
            margin-bottom: 5px;
        }

        body.light-mode .thought-reference strong {
            color: #667eea;
        }

        .thought-reference .previous-value {
            color: #10b981;
            font-weight: 600;
            margin-top: 5px;
            display: block;
            font-size: 0.95em;
        }

        .conclusion-response {
            margin-top: 10px;
        }

        .dynamic-field .btn-remove {
            background: #ef4444;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            flex-shrink: 0;
        }

        .dynamic-field .btn-remove:hover {
            background: #dc2626;
            transform: scale(1.05);
        }

        .dynamic-fields-container {
            padding-left: 30px;
        }

        .btn-add-field {
            background: #10b981;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 5px;
            margin-top: 10px;
        }

        .btn-add-field:hover {
            background: #059669;
            transform: translateY(-2px);
        }

        .btn-container {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin: 30px 20px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 15px 40px;
            border: none;
            border-radius: 10px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .btn-save {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-save:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }

        .btn-clear {
            background: #2d3748;
            color: #cbd5e0;
        }

        .btn-clear:hover {
            background: #4a5568;
            transform: translateY(-2px);
        }

        .btn-export {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
        }

        .btn-export:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(16, 185, 129, 0.4);
        }

        .saved-entries {
            margin: 20px;
        }

        .saved-entries h2 {
            color: #a78bfa;
            margin-bottom: 20px;
            font-size: 1.8em;
            transition: all 0.3s ease;
        }

        body.light-mode .saved-entries h2 {
            color: #667eea;
        }

        .entry-card {
            background: #1a202c;
            border: 2px solid #2d3748;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            transition: all 0.3s ease;
        }

        body.light-mode .entry-card {
            background: #ffffff;
            border: 2px solid #e2e8f0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }

        .entry-card:hover {
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
            border-color: #667eea;
        }

        .entry-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #2d3748;
        }

        .entry-date {
            font-weight: 600;
            color: #a78bfa;
            font-size: 1.1em;
            transition: all 0.3s ease;
        }

        body.light-mode .entry-date {
            color: #667eea;
        }

        .btn-delete {
            background: #ef4444;
            color: white;
            border: none;
            padding: 8px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn-delete:hover {
            background: #dc2626;
            transform: scale(1.05);
        }

        .entry-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        .entry-field {
            background: #0f1419;
            padding: 15px;
            border-radius: 10px;
            border: 1px solid #2d3748;
            transition: all 0.3s ease;
        }

        body.light-mode .entry-field {
            background: #f7fafc;
            border: 1px solid #e2e8f0;
        }

        .entry-field h4 {
            color: #a78bfa;
            margin-bottom: 8px;
            font-size: 0.95em;
            transition: all 0.3s ease;
        }

        body.light-mode .entry-field h4 {
            color: #667eea;
        }

        .entry-field p {
            color: #cbd5e0;
            line-height: 1.6;
            word-wrap: break-word;
            transition: all 0.3s ease;
        }

        body.light-mode .entry-field p {
            color: #4a5568;
        }

        .entry-field .item-list {
            margin-top: 10px;
        }

        .entry-field .item-list div {
            background: #1a202c;
            padding: 10px;
            margin-bottom: 8px;
            border-radius: 6px;
            border-left: 3px solid #667eea;
            transition: all 0.3s ease;
        }

        body.light-mode .entry-field .item-list div {
            background: #edf2f7;
            border-left: 3px solid #667eea;
        }

        .entry-field .item-list .percentage {
            color: #10b981;
            font-weight: 600;
            margin-left: 10px;
        }

        .help-section {
            background: #1a202c;
            padding: 25px;
            margin: 20px;
            border-radius: 15px;
            border-left: 5px solid #10b981;
            transition: all 0.3s ease;
        }

        body.light-mode .help-section {
            background: #f0fdf4;
            border-left: 5px solid #10b981;
        }

        .help-section h3 {
            color: #10b981;
            margin-bottom: 15px;
        }

        .help-section ol {
            margin-left: 20px;
            line-height: 2;
        }

        .help-section li {
            color: #cbd5e0;
            margin-bottom: 10px;
            transition: all 0.3s ease;
        }

        body.light-mode .help-section li {
            color: #4a5568;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #718096;
        }

        .empty-state::before {
            content: 'üìã';
            font-size: 4em;
            display: block;
            margin-bottom: 20px;
        }

        @media (max-width: 768px) {
            .entry-content {
                grid-template-columns: 1fr;
            }
            
            .btn-container {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
                justify-content: center;
            }

            .dynamic-field {
                flex-direction: column;
            }

            .dynamic-field input[type="number"] {
                width: 100%;
            }
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #10b981;
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
            display: none;
            animation: slideIn 0.3s ease;
            z-index: 1000;
        }

        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        input[type="number"]::-webkit-inner-spin-button,
        input[type="number"]::-webkit-outer-spin-button {
            opacity: 1;
        }
    </style>
</head>
<body>
    <div class="notification" id="notification"></div>

    <div class="container">
        <div class="header">
            <button class="theme-toggle" onclick="toggleTheme()">
                <span id="themeIcon">üåô</span>
                <span id="themeText">Modo Claro</span>
            </button>
            <h1>üìù Registro de Pensamentos Disfuncionais</h1>
            <p>Ferramenta de autoconhecimento e regula√ß√£o emocional</p>
        </div>

        <div class="instructions">
            <p><strong>üí° Como usar:</strong> Quando voc√™ perceber o seu humor alterando, pergunte a si mesmo <em>"O que est√° passando pela minha cabe√ßa agora?"</em> e, assim que poss√≠vel, anote o pensamento ou imagem mental abaixo.</p>
        </div>

        <div class="main-content">
            <form id="thoughtForm">
                <div class="form-section">
                    <h3>üìÖ Data e Situa√ß√£o</h3>
                    <div class="form-group">
                        <label for="dateTime">Data e Hora:</label>
                        <input type="datetime-local" id="dateTime" required>
                    </div>
                    <div class="form-group">
                        <label for="situation">Que situa√ß√£o real, fluxo de pensamentos, devaneios ou recorda√ß√µes levaram a emo√ß√£o desagrad√°vel?</label>
                        <textarea id="situation" required></textarea>
                    </div>
                </div>

                <div class="form-section">
                    <h3>üí≠ Pensamentos Autom√°ticos</h3>
                    <div class="form-group">
                        <label>Quais foram os pensamentos autom√°ticos que passaram pela sua cabe√ßa?</label>
                        <div id="thoughtsContainer" class="dynamic-fields-container">
                            <div class="dynamic-field" data-number="1.">
                                <textarea placeholder="Descreva o pensamento autom√°tico..." required oninput="updateConclusionsFromThoughts(); updateResultsFromThoughts();"></textarea>
                                <div class="percentage-wrapper">
                                    <input type="number" min="0" max="100" step="0.1" placeholder="0-100" title="Cren√ßa (0-100%)" oninput="updateConclusionsFromThoughts(); updateResultsFromThoughts();">
                                </div>
                                <button type="button" class="btn-remove" onclick="removeField(this, 'thoughtsContainer')">üóëÔ∏è</button>
                            </div>
                        </div>
                        <button type="button" class="btn-add-field" onclick="addThought()">‚ûï Adicionar Pensamento</button>
                    </div>
                </div>

                <div class="form-section">
                    <h3>üò¢ Emo√ß√£o</h3>
                    <div class="form-group">
                        <label>Que emo√ß√£o(√µes) voc√™ sentiu? (tristeza/ansiedade/raiva/etc...)</label>
                        <div id="emotionsContainer" class="dynamic-fields-container">
                            <div class="dynamic-field" data-number="1.">
                                <input type="text" placeholder="Nome da emo√ß√£o..." required oninput="updateResultEmotions()">
                                <div class="percentage-wrapper">
                                    <input type="number" min="0" max="100" step="0.1" placeholder="0-100" title="Intensidade (0-100%)" oninput="updateResultEmotions()">
                                </div>
                                <button type="button" class="btn-remove" onclick="removeField(this, 'emotionsContainer')">üóëÔ∏è</button>
                            </div>
                        </div>
                        <button type="button" class="btn-add-field" onclick="addEmotion()">‚ûï Adicionar Emo√ß√£o</button>
                    </div>
                </div>

                <div class="form-section">
                    <h3>üí° Conclus√£o (Resposta Racional)</h3>
                    <div class="form-group">
                        <label>Quais s√£o suas respostas racionais aos pensamentos autom√°ticos?</label>
                        <div id="conclusionsContainer" class="dynamic-fields-container">
                            <!-- Os pensamentos e respostas ser√£o inseridos aqui dinamicamente -->
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h3>‚úÖ Resultado</h3>
                    <div class="form-group">
                        <label>Reavalia√ß√£o dos pensamentos - Quanto voc√™ acredita agora?</label>
                        <div id="resultsContainer" class="dynamic-fields-container">
                            <!-- Os pensamentos e reavalia√ß√µes ser√£o inseridos aqui dinamicamente -->
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Reavalia√ß√£o das emo√ß√µes - Como voc√™ se sente agora?</label>
                        <div id="newEmotionsContainer" class="dynamic-fields-container">
                            <!-- As emo√ß√µes ser√£o inseridas aqui dinamicamente -->
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="action">O que voc√™ far√° (ou fez)?</label>
                        <textarea id="action"></textarea>
                    </div>
                </div>

                <div class="btn-container">
                    <button type="submit" class="btn btn-save">üíæ Salvar Registro</button>
                    <button type="button" class="btn btn-clear" onclick="clearForm()">üóëÔ∏è Limpar Formul√°rio</button>
                    <button type="button" class="btn btn-export" onclick="exportToTxt()">üìÑ Exportar para TXT</button>
                </div>
            </form>
        </div>

        <div class="help-section">
            <h3>‚ùì Perguntas para ajudar a compor uma resposta alternativa:</h3>
            <ol>
                <li>Qual √© a evid√™ncia de que o pensamento autom√°tico √© verdadeiro? Falso?</li>
                <li>H√° uma explica√ß√£o alternativa?</li>
                <li>O que √© o pior que poderia acontecer? Eu poderia superar isso? O que √© o melhor que poderia acontecer? Qual √© o resultado mais realista?</li>
                <li>Qual √© o efeito da minha cren√ßa no pensamento autom√°tico? Qual poderia ser o efeito de eu mudar o meu pensamento?</li>
                <li>O que eu deveria fazer em rela√ß√£o a isso?</li>
                <li>Se [nome do amigo] estivesse na situa√ß√£o e tivesse esse pensamento, o que eu diria para ele/ela?</li>
                <li>Seu pensamento se enquadra em alguma distor√ß√£o cognitiva? Qual?</li>
            </ol>
        </div>

        <div class="saved-entries">
            <h2>üìö Registros Salvos</h2>
            <div id="entriesList"></div>
        </div>
    </div>

    <script>
        // Definir data/hora atual ao carregar
        document.addEventListener('DOMContentLoaded', function() {
            const now = new Date();
            now.setMinutes(now.getMinutes() - now.getTimezoneOffset());
            document.getElementById('dateTime').value = now.toISOString().slice(0, 16);
            
            // Carregar tema salvo
            const savedTheme = localStorage.getItem('theme') || 'dark';
            if (savedTheme === 'light') {
                document.body.classList.add('light-mode');
                document.getElementById('themeIcon').textContent = '‚òÄÔ∏è';
                document.getElementById('themeText').textContent = 'Modo Escuro';
            }
            
            loadEntries();
            updateConclusionsFromThoughts();
            updateResultsFromThoughts();
            updateResultEmotions();
        });

        // Fun√ß√£o para alternar tema
        function toggleTheme() {
            document.body.classList.toggle('light-mode');
            const isLight = document.body.classList.contains('light-mode');
            
            document.getElementById('themeIcon').textContent = isLight ? '‚òÄÔ∏è' : 'üåô';
            document.getElementById('themeText').textContent = isLight ? 'Modo Escuro' : 'Modo Claro';
            
            localStorage.setItem('theme', isLight ? 'light' : 'dark');
        }

        // Fun√ß√µes para adicionar campos din√¢micos
        function addThought() {
            const container = document.getElementById('thoughtsContainer');
            const count = container.children.length + 1;
            const div = document.createElement('div');
            div.className = 'dynamic-field';
            div.setAttribute('data-number', count + '.');
            div.innerHTML = `
                <textarea placeholder="Descreva o pensamento autom√°tico..." oninput="updateConclusionsFromThoughts(); updateResultsFromThoughts();"></textarea>
                <div class="percentage-wrapper">
                    <input type="number" min="0" max="100" step="0.1" placeholder="0-100" title="Cren√ßa (0-100%)" oninput="updateConclusionsFromThoughts(); updateResultsFromThoughts();">
                </div>
                <button type="button" class="btn-remove" onclick="removeField(this, 'thoughtsContainer')">üóëÔ∏è</button>
            `;
            container.appendChild(div);
            updateConclusionsFromThoughts();
            updateResultsFromThoughts();
        }

        function addEmotion() {
            const container = document.getElementById('emotionsContainer');
            const count = container.children.length + 1;
            const div = document.createElement('div');
            div.className = 'dynamic-field';
            div.setAttribute('data-number', count + '.');
            div.innerHTML = `
                <input type="text" placeholder="Nome da emo√ß√£o..." oninput="updateResultEmotions()">
                <div class="percentage-wrapper">
                    <input type="number" min="0" max="100" step="0.1" placeholder="0-100" title="Intensidade (0-100%)" oninput="updateResultEmotions()">
                </div>
                <button type="button" class="btn-remove" onclick="removeField(this, 'emotionsContainer')">üóëÔ∏è</button>
            `;
            container.appendChild(div);
            updateResultEmotions();
        }

        function addConclusion() {
            const container = document.getElementById('conclusionsContainer');
            const count = container.children.length + 1;
            const div = document.createElement('div');
            div.className = 'dynamic-field';
            div.setAttribute('data-number', count + '.');
            div.innerHTML = `
                <textarea placeholder="Resposta racional..."></textarea>
                <input type="number" min="0" max="100" placeholder="%" title="Cren√ßa (0-100%)">
                <button type="button" class="btn-remove" onclick="removeField(this, 'conclusionsContainer')">üóëÔ∏è</button>
            `;
            container.appendChild(div);
        }

        // Fun√ß√£o para atualizar conclus√µes baseadas nos pensamentos
        function updateConclusionsFromThoughts() {
            const thoughtsContainer = document.getElementById('thoughtsContainer');
            const conclusionsContainer = document.getElementById('conclusionsContainer');
            
            const thoughtFields = thoughtsContainer.querySelectorAll('.dynamic-field');
            
            // Limpar container de conclus√µes
            conclusionsContainer.innerHTML = '';
            
            // Para cada pensamento, criar uma se√ß√£o de conclus√£o
            thoughtFields.forEach((field, index) => {
                const textarea = field.querySelector('textarea');
                const percentageInput = field.querySelector('input[type="number"]');
                const thoughtText = textarea.value.trim();
                const thoughtPercentage = percentageInput.value;
                
                const conclusionBlock = document.createElement('div');
                conclusionBlock.style.marginBottom = '20px';
                
                // Refer√™ncia ao pensamento
                if (thoughtText) {
                    const thoughtRef = document.createElement('div');
                    thoughtRef.className = 'thought-reference';
                    thoughtRef.innerHTML = `
                        <strong>Pensamento ${index + 1}:</strong>
                        ${thoughtText}
                        ${thoughtPercentage ? `<span class="previous-value">Cren√ßa inicial: ${thoughtPercentage}%</span>` : ''}
                    `;
                    conclusionBlock.appendChild(thoughtRef);
                }
                
                // Campo de resposta
                const responseDiv = document.createElement('div');
                responseDiv.className = 'conclusion-response';
                
                const dynamicField = document.createElement('div');
                dynamicField.className = 'dynamic-field';
                dynamicField.setAttribute('data-number', (index + 1) + '.');
                dynamicField.innerHTML = `
                    <textarea placeholder="Resposta racional ao pensamento ${index + 1}..."></textarea>
                    <div class="percentage-wrapper">
                        <input type="number" min="0" max="100" step="0.1" placeholder="0-100" title="Cren√ßa (0-100%)">
                    </div>
                `;
                
                responseDiv.appendChild(dynamicField);
                conclusionBlock.appendChild(responseDiv);
                
                conclusionsContainer.appendChild(conclusionBlock);
            });
        }

        // Fun√ß√£o para atualizar resultados baseados nos pensamentos
        function updateResultsFromThoughts() {
            const thoughtsContainer = document.getElementById('thoughtsContainer');
            const conclusionsContainer = document.getElementById('conclusionsContainer');
            const resultsContainer = document.getElementById('resultsContainer');
            
            const thoughtFields = thoughtsContainer.querySelectorAll('.dynamic-field');
            
            // Limpar container de resultados
            resultsContainer.innerHTML = '';
            
            // Para cada pensamento, criar uma se√ß√£o de resultado
            thoughtFields.forEach((field, index) => {
                const textarea = field.querySelector('textarea');
                const percentageInput = field.querySelector('input[type="number"]');
                const thoughtText = textarea.value.trim();
                const thoughtPercentage = percentageInput.value;
                
                // Buscar a resposta racional da conclus√£o
                const conclusionBlocks = conclusionsContainer.children;
                let conclusionText = '';
                let conclusionPercentage = '';
                
                if (conclusionBlocks[index]) {
                    const conclusionField = conclusionBlocks[index].querySelector('.dynamic-field');
                    if (conclusionField) {
                        const conclusionTextarea = conclusionField.querySelector('textarea');
                        const conclusionPercentInput = conclusionField.querySelector('input[type="number"]');
                        conclusionText = conclusionTextarea ? conclusionTextarea.value : '';
                        conclusionPercentage = conclusionPercentInput ? conclusionPercentInput.value : '';
                    }
                }
                
                const resultBlock = document.createElement('div');
                resultBlock.style.marginBottom = '20px';
                
                // Refer√™ncia ao pensamento com conclus√£o
                if (thoughtText) {
                    const thoughtRef = document.createElement('div');
                    thoughtRef.className = 'thought-reference';
                    let htmlContent = `
                        <strong>Pensamento ${index + 1}:</strong>
                        ${thoughtText}
                        ${thoughtPercentage ? `<span class="previous-value">Cren√ßa inicial: ${thoughtPercentage}%</span>` : ''}
                    `;
                    
                    if (conclusionText) {
                        htmlContent += `
                        <hr style="border: none; border-top: 1px solid #2d3748; margin: 8px 0;">
                        <strong style="font-size: 0.85em;">Resposta racional:</strong><br>
                        ${conclusionText}
                        ${conclusionPercentage ? `<span class="previous-value">Cren√ßa na resposta: ${conclusionPercentage}%</span>` : ''}
                        `;
                    }
                    
                    thoughtRef.innerHTML = htmlContent;
                    resultBlock.appendChild(thoughtRef);
                }
                
                // Campo de reavalia√ß√£o
                const responseDiv = document.createElement('div');
                responseDiv.className = 'conclusion-response';
                
                const dynamicField = document.createElement('div');
                dynamicField.className = 'dynamic-field';
                dynamicField.setAttribute('data-number', (index + 1) + '.');
                dynamicField.innerHTML = `
                    <textarea placeholder="Como voc√™ v√™ esse pensamento agora? (Nova cren√ßa)"></textarea>
                    <div class="percentage-wrapper">
                        <input type="number" min="0" max="100" step="0.1" placeholder="0-100" title="Nova cren√ßa (0-100%)">
                    </div>
                `;
                
                responseDiv.appendChild(dynamicField);
                resultBlock.appendChild(responseDiv);
                
                resultsContainer.appendChild(resultBlock);
            });
        }

        // Fun√ß√£o para atualizar novas emo√ß√µes baseadas nas emo√ß√µes iniciais
        function updateResultEmotions() {
            const emotionsContainer = document.getElementById('emotionsContainer');
            const newEmotionsContainer = document.getElementById('newEmotionsContainer');
            
            const emotionFields = emotionsContainer.querySelectorAll('.dynamic-field');
            
            // Limpar container de novas emo√ß√µes
            newEmotionsContainer.innerHTML = '';
            
            // Para cada emo√ß√£o, criar uma se√ß√£o de nova emo√ß√£o
            emotionFields.forEach((field, index) => {
                const textInput = field.querySelector('input[type="text"]');
                const percentageInput = field.querySelector('input[type="number"]');
                const emotionText = textInput.value.trim();
                const emotionPercentage = percentageInput.value;
                
                const emotionBlock = document.createElement('div');
                emotionBlock.style.marginBottom = '20px';
                
                // Refer√™ncia √† emo√ß√£o
                if (emotionText) {
                    const emotionRef = document.createElement('div');
                    emotionRef.className = 'thought-reference';
                    emotionRef.innerHTML = `
                        <strong>Emo√ß√£o inicial ${index + 1}:</strong>
                        ${emotionText}
                        ${emotionPercentage ? `<span class="previous-value">Intensidade inicial: ${emotionPercentage}%</span>` : ''}
                    `;
                    emotionBlock.appendChild(emotionRef);
                }
                
                // Campo de nova emo√ß√£o
                const responseDiv = document.createElement('div');
                responseDiv.className = 'conclusion-response';
                
                const dynamicField = document.createElement('div');
                dynamicField.className = 'dynamic-field';
                dynamicField.setAttribute('data-number', (index + 1) + '.');
                dynamicField.innerHTML = `
                    <input type="text" placeholder="Como voc√™ se sente agora?">
                    <div class="percentage-wrapper">
                        <input type="number" min="0" max="100" step="0.1" placeholder="0-100" title="Intensidade (0-100%)">
                    </div>
                `;
                
                responseDiv.appendChild(dynamicField);
                emotionBlock.appendChild(responseDiv);
                
                newEmotionsContainer.appendChild(emotionBlock);
            });
        }

        function addResult() {
            const container = document.getElementById('resultsContainer');
            const count = container.children.length + 1;
            const div = document.createElement('div');
            div.className = 'dynamic-field';
            div.setAttribute('data-number', count + '.');
            div.innerHTML = `
                <textarea placeholder="Pensamento reavaliado..."></textarea>
                <div class="percentage-wrapper">
                    <input type="number" min="0" max="100" placeholder="0-100" title="Nova cren√ßa (0-100%)">
                </div>
            `;
            container.appendChild(div);
        }

        function addNewEmotion() {
            const container = document.getElementById('newEmotionsContainer');
            const count = container.children.length + 1;
            const div = document.createElement('div');
            div.className = 'dynamic-field';
            div.setAttribute('data-number', count + '.');
            div.innerHTML = `
                <input type="text" placeholder="Nova emo√ß√£o...">
                <div class="percentage-wrapper">
                    <input type="number" min="0" max="100" placeholder="0-100" title="Intensidade (0-100%)">
                </div>
            `;
            container.appendChild(div);
        }

        function removeField(button, containerId) {
            const field = button.parentElement;
            const container = document.getElementById(containerId);
            if (container.children.length > 1) {
                field.remove();
                renumberFields(containerId);
                
                // Se remover um pensamento, atualizar conclus√µes e resultados
                if (containerId === 'thoughtsContainer') {
                    updateConclusionsFromThoughts();
                    updateResultsFromThoughts();
                }
                // Se remover uma emo√ß√£o, atualizar novas emo√ß√µes
                if (containerId === 'emotionsContainer') {
                    updateResultEmotions();
                }
            } else {
                showNotification('‚ö†Ô∏è Deve haver pelo menos um campo');
            }
        }

        function renumberFields(containerId) {
            const container = document.getElementById(containerId);
            const fields = container.querySelectorAll('.dynamic-field');
            fields.forEach((field, index) => {
                field.setAttribute('data-number', (index + 1) + '.');
            });
        }

        // Fun√ß√£o para coletar dados dos campos din√¢micos
        function collectDynamicFields(containerId) {
            const container = document.getElementById(containerId);
            
            if (containerId === 'conclusionsContainer' || containerId === 'resultsContainer') {
                // Para conclus√µes e resultados, coletar de forma diferente
                const blocks = container.children;
                const data = [];
                
                for (let block of blocks) {
                    const field = block.querySelector('.dynamic-field');
                    if (field) {
                        const textarea = field.querySelector('textarea');
                        const percentageInput = field.querySelector('input[type="number"]');
                        if (textarea && textarea.value.trim()) {
                            const thoughtRef = block.querySelector('.thought-reference');
                            data.push({
                                thought: thoughtRef ? thoughtRef.textContent.replace(/Pensamento (inicial )?/, '').replace(':', '').trim() : '',
                                text: textarea.value,
                                percentage: percentageInput ? percentageInput.value : null
                            });
                        }
                    }
                }
                
                return data;
            }

            if (containerId === 'newEmotionsContainer') {
                // Para novas emo√ß√µes, coletar de forma diferente
                const blocks = container.children;
                const data = [];
                
                for (let block of blocks) {
                    const field = block.querySelector('.dynamic-field');
                    if (field) {
                        const textInput = field.querySelector('input[type="text"]');
                        const percentageInput = field.querySelector('input[type="number"]');
                        if (textInput && textInput.value.trim()) {
                            const emotionRef = block.querySelector('.thought-reference');
                            data.push({
                                originalEmotion: emotionRef ? emotionRef.textContent.replace('Emo√ß√£o inicial ', '').replace(':', '').trim() : '',
                                text: textInput.value,
                                percentage: percentageInput ? percentageInput.value : null
                            });
                        }
                    }
                }
                
                return data;
            }
            
            const fields = container.querySelectorAll('.dynamic-field');
            const data = [];
            
            fields.forEach(field => {
                const textarea = field.querySelector('textarea');
                const textInput = field.querySelector('input[type="text"]');
                const percentageInput = field.querySelector('input[type="number"]');
                
                const mainInput = textarea || textInput;
                if (mainInput && mainInput.value.trim()) {
                    data.push({
                        text: mainInput.value,
                        percentage: percentageInput ? percentageInput.value : null
                    });
                }
            });
            
            return data;
        }

        // Fun√ß√£o para salvar entrada
        document.getElementById('thoughtForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Salvar os valores das conclus√µes e resultados antes de coletar
            const conclusionsData = [];
            const conclusionsContainer = document.getElementById('conclusionsContainer');
            const conclusionBlocks = conclusionsContainer.children;
            
            for (let block of conclusionBlocks) {
                const field = block.querySelector('.dynamic-field');
                if (field) {
                    const textarea = field.querySelector('textarea');
                    const percentageInput = field.querySelector('input[type="number"]');
                    const thoughtRef = block.querySelector('.thought-reference');
                    
                    conclusionsData.push({
                        thought: thoughtRef ? thoughtRef.textContent.replace(/Pensamento (inicial )?/, '').replace(':', '').split('\n')[0].trim() : '',
                        text: textarea ? textarea.value : '',
                        percentage: percentageInput ? percentageInput.value : null
                    });
                }
            }
            
            const resultsData = [];
            const resultsContainer = document.getElementById('resultsContainer');
            const resultBlocks = resultsContainer.children;
            
            for (let block of resultBlocks) {
                const field = block.querySelector('.dynamic-field');
                if (field) {
                    const textarea = field.querySelector('textarea');
                    const percentageInput = field.querySelector('input[type="number"]');
                    const thoughtRef = block.querySelector('.thought-reference');
                    
                    resultsData.push({
                        thought: thoughtRef ? thoughtRef.textContent.replace(/Pensamento (inicial )?/, '').replace(':', '').split('\n')[0].trim() : '',
                        text: textarea ? textarea.value : '',
                        percentage: percentageInput ? percentageInput.value : null
                    });
                }
            }
            
            const newEmotionsData = [];
            const newEmotionsContainer = document.getElementById('newEmotionsContainer');
            const emotionBlocks = newEmotionsContainer.children;
            
            for (let block of emotionBlocks) {
                const field = block.querySelector('.dynamic-field');
                if (field) {
                    const textInput = field.querySelector('input[type="text"]');
                    const percentageInput = field.querySelector('input[type="number"]');
                    const emotionRef = block.querySelector('.thought-reference');
                    
                    newEmotionsData.push({
                        originalEmotion: emotionRef ? emotionRef.textContent.replace('Emo√ß√£o inicial ', '').replace(':', '').split('\n')[0].trim() : '',
                        text: textInput ? textInput.value : '',
                        percentage: percentageInput ? percentageInput.value : null
                    });
                }
            }
            
            const entry = {
                id: Date.now(),
                dateTime: document.getElementById('dateTime').value,
                situation: document.getElementById('situation').value,
                thoughts: collectDynamicFields('thoughtsContainer'),
                emotions: collectDynamicFields('emotionsContainer'),
                conclusions: conclusionsData,
                results: resultsData,
                newEmotions: newEmotionsData,
                action: document.getElementById('action').value
            };

            // Buscar entradas existentes
            let entries = JSON.parse(localStorage.getItem('thoughtEntries') || '[]');
            entries.unshift(entry);
            localStorage.setItem('thoughtEntries', JSON.stringify(entries));

            showNotification('‚úÖ Registro salvo com sucesso!');
            clearForm();
            loadEntries();
        });

        // Fun√ß√£o para limpar formul√°rio
        function clearForm() {
            document.getElementById('thoughtForm').reset();
            const now = new Date();
            now.setMinutes(now.getMinutes() - now.getTimezoneOffset());
            document.getElementById('dateTime').value = now.toISOString().slice(0, 16);
            
            // Resetar containers din√¢micos
            resetContainer('thoughtsContainer', 'textarea');
            resetContainer('emotionsContainer', 'input');
            resetContainer('conclusionsContainer', 'textarea');
            resetContainer('resultsContainer', 'textarea');
            resetContainer('newEmotionsContainer', 'input');
        }

        function resetContainer(containerId, inputType) {
            if (containerId === 'conclusionsContainer') {
                // Conclus√µes ser√£o recriadas automaticamente
                updateConclusionsFromThoughts();
                return;
            }
            
            if (containerId === 'resultsContainer') {
                // Resultados ser√£o recriados automaticamente
                updateResultsFromThoughts();
                return;
            }
            
            if (containerId === 'newEmotionsContainer') {
                // Novas emo√ß√µes ser√£o recriadas automaticamente
                updateResultEmotions();
                return;
            }
            
            const container = document.getElementById(containerId);
            const fields = container.querySelectorAll('.dynamic-field');
            
            // Remove campos extras, deixa apenas o primeiro
            for (let i = fields.length - 1; i > 0; i--) {
                fields[i].remove();
            }
            
            // Limpa o primeiro campo
            if (fields[0]) {
                fields[0].querySelectorAll('input, textarea').forEach(input => input.value = '');
            }
        }

        // Fun√ß√£o para carregar entradas
        function loadEntries() {
            const entries = JSON.parse(localStorage.getItem('thoughtEntries') || '[]');
            const entriesList = document.getElementById('entriesList');

            if (entries.length === 0) {
                entriesList.innerHTML = '<div class="empty-state"><h3>Nenhum registro ainda</h3><p>Comece preenchendo o formul√°rio acima para criar seu primeiro registro.</p></div>';
                return;
            }

            entriesList.innerHTML = entries.map(entry => `
                <div class="entry-card">
                    <div class="entry-header">
                        <span class="entry-date">üìÖ ${formatDate(entry.dateTime)}</span>
                        <button class="btn-delete" onclick="deleteEntry(${entry.id})">üóëÔ∏è Excluir</button>
                    </div>
                    <div class="entry-content">
                        <div class="entry-field">
                            <h4>Situa√ß√£o</h4>
                            <p>${entry.situation}</p>
                        </div>
                        ${entry.thoughts && entry.thoughts.length > 0 ? `
                        <div class="entry-field">
                            <h4>Pensamentos Autom√°ticos</h4>
                            <div class="item-list">
                                ${entry.thoughts.map(t => `
                                    <div>
                                        ${t.text}
                                        ${t.percentage ? `<span class="percentage">${t.percentage}%</span>` : ''}
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                        ` : ''}
                        ${entry.emotions && entry.emotions.length > 0 ? `
                        <div class="entry-field">
                            <h4>Emo√ß√µes</h4>
                            <div class="item-list">
                                ${entry.emotions.map(e => `
                                    <div>
                                        ${e.text}
                                        ${e.percentage ? `<span class="percentage">${e.percentage}%</span>` : ''}
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                        ` : ''}
                        ${entry.conclusions && entry.conclusions.length > 0 ? `
                        <div class="entry-field">
                            <h4>Conclus√µes</h4>
                            <div class="item-list">
                                ${entry.conclusions.map(c => `
                                    <div>
                                        ${c.thought ? `<em style="color: #10b981;">‚Üí Pensamento ${c.thought}</em><br>` : ''}
                                        ${c.text}
                                        ${c.percentage ? `<span class="percentage">${c.percentage}%</span>` : ''}
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                        ` : ''}
                        ${entry.results && entry.results.length > 0 ? `
                        <div class="entry-field">
                            <h4>Resultados</h4>
                            <div class="item-list">
                                ${entry.results.map(r => `
                                    <div>
                                        ${r.text}
                                        ${r.percentage ? `<span class="percentage">${r.percentage}%</span>` : ''}
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                        ` : ''}
                        ${entry.newEmotions && entry.newEmotions.length > 0 ? `
                        <div class="entry-field">
                            <h4>Novas Emo√ß√µes</h4>
                            <div class="item-list">
                                ${entry.newEmotions.map(e => `
                                    <div>
                                        ${e.text}
                                        ${e.percentage ? `<span class="percentage">${e.percentage}%</span>` : ''}
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                        ` : ''}
                        ${entry.action ? `
                        <div class="entry-field">
                            <h4>A√ß√£o</h4>
                            <p>${entry.action}</p>
                        </div>
                        ` : ''}
                    </div>
                </div>
            `).join('');
        }

        // Fun√ß√£o para deletar entrada
        function deleteEntry(id) {
            if (confirm('Tem certeza que deseja excluir este registro?')) {
                let entries = JSON.parse(localStorage.getItem('thoughtEntries') || '[]');
                entries = entries.filter(entry => entry.id !== id);
                localStorage.setItem('thoughtEntries', JSON.stringify(entries));
                showNotification('üóëÔ∏è Registro exclu√≠do');
                loadEntries();
            }
        }

        // Fun√ß√£o para formatar data
        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleString('pt-BR', {
                day: '2-digit',
                month: '2-digit',
                year: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
        }

        // Fun√ß√£o para mostrar notifica√ß√£o
        function showNotification(message) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.style.display = 'block';
            setTimeout(() => {
                notification.style.display = 'none';
            }, 3000);
        }

        // Fun√ß√£o para exportar para TXT
        function exportToTxt() {
            const entries = JSON.parse(localStorage.getItem('thoughtEntries') || '[]');
            
            if (entries.length === 0) {
                showNotification('‚ö†Ô∏è Nenhum registro para exportar');
                return;
            }

            let txtContent = '';
            txtContent += '‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n';
            txtContent += '              REGISTRO DE PENSAMENTOS DISFUNCIONAIS\n';
            txtContent += '‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n\n';

            entries.forEach((entry, index) => {
                txtContent += `\n${'‚îÄ'.repeat(67)}\n`;
                txtContent += `REGISTRO #${entries.length - index}\n`;
                txtContent += `${'‚îÄ'.repeat(67)}\n\n`;

                txtContent += `üìÖ DATA E HORA: ${formatDate(entry.dateTime)}\n\n`;

                txtContent += `üìç SITUA√á√ÉO:\n`;
                txtContent += `${entry.situation}\n\n`;

                if (entry.thoughts && entry.thoughts.length > 0) {
                    txtContent += `üí≠ PENSAMENTOS AUTOM√ÅTICOS:\n`;
                    entry.thoughts.forEach((thought, i) => {
                        txtContent += `   ${i + 1}. ${thought.text}`;
                        if (thought.percentage) {
                            txtContent += ` [Cren√ßa: ${thought.percentage}%]`;
                        }
                        txtContent += '\n';
                    });
                    txtContent += '\n';
                }

                if (entry.emotions && entry.emotions.length > 0) {
                    txtContent += `üò¢ EMO√á√ïES:\n`;
                    entry.emotions.forEach((emotion, i) => {
                        txtContent += `   ${i + 1}. ${emotion.text}`;
                        if (emotion.percentage) {
                            txtContent += ` [Intensidade: ${emotion.percentage}%]`;
                        }
                        txtContent += '\n';
                    });
                    txtContent += '\n';
                }

                if (entry.conclusions && entry.conclusions.length > 0) {
                    txtContent += `üí° CONCLUS√ïES (Respostas Racionais):\n`;
                    entry.conclusions.forEach((conclusion, i) => {
                        txtContent += `   ${i + 1}. ${conclusion.text}`;
                        if (conclusion.percentage) {
                            txtContent += ` [Cren√ßa: ${conclusion.percentage}%]`;
                        }
                        txtContent += '\n';
                    });
                    txtContent += '\n';
                }

                if (entry.results && entry.results.length > 0) {
                    txtContent += `‚úÖ RESULTADOS (Pensamentos Reavaliados):\n`;
                    entry.results.forEach((result, i) => {
                        txtContent += `   ${i + 1}. ${result.text}`;
                        if (result.percentage) {
                            txtContent += ` [Nova cren√ßa: ${result.percentage}%]`;
                        }
                        txtContent += '\n';
                    });
                    txtContent += '\n';
                }

                if (entry.newEmotions && entry.newEmotions.length > 0) {
                    txtContent += `üåü NOVAS EMO√á√ïES:\n`;
                    entry.newEmotions.forEach((emotion, i) => {
                        txtContent += `   ${i + 1}. ${emotion.text}`;
                        if (emotion.percentage) {
                            txtContent += ` [Intensidade: ${emotion.percentage}%]`;
                        }
                        txtContent += '\n';
                    });
                    txtContent += '\n';
                }

                if (entry.action) {
                    txtContent += `üéØ A√á√ÉO:\n`;
                    txtContent += `${entry.action}\n\n`;
                }
            });

            txtContent += '\n‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n';
            txtContent += '          PERGUNTAS PARA RESPOSTAS ALTERNATIVAS\n';
            txtContent += '‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n\n';
            txtContent += '1. Qual √© a evid√™ncia de que o pensamento autom√°tico √© verdadeiro?\n   Falso?\n\n';
            txtContent += '2. H√° uma explica√ß√£o alternativa?\n\n';
            txtContent += '3. O que √© o pior que poderia acontecer? Eu poderia superar isso?\n   O que √© o melhor que poderia acontecer? Qual √© o resultado\n   mais realista?\n\n';
            txtContent += '4. Qual √© o efeito da minha cren√ßa no pensamento autom√°tico?\n   Qual poderia ser o efeito de eu mudar o meu pensamento?\n\n';
            txtContent += '5. O que eu deveria fazer em rela√ß√£o a isso?\n\n';
            txtContent += '6. Se [nome do amigo] estivesse na situa√ß√£o e tivesse esse\n   pensamento, o que eu diria para ele/ela?\n\n';
            txtContent += '7. Seu pensamento se enquadra em alguma distor√ß√£o cognitiva?\n   Qual?\n\n';
            txtContent += '‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n';
            txtContent += `Exportado em: ${new Date().toLocaleString('pt-BR')}\n`;
            txtContent += 'www.cognitivocomportamental.com.br\n';

            // Criar e baixar arquivo
            const blob = new Blob([txtContent], { type: 'text/plain;charset=utf-8' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `pensamentos_disfuncionais_${new Date().toISOString().split('T')[0]}.txt`;
            link.click();
            
            showNotification('üìÑ Arquivo TXT exportado com sucesso!');
        }
    </script>
</body>
</html>